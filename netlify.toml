[build]
  publish = "public"
  command = ""

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# ✅ Allow anyone to load this JS across origins (ORB-safe)
[[headers]]
  for = "/ZInfinityAuth.js"
  [headers.values]
  Access-Control-Allow-Origin = "*"
  Access-Control-Allow-Methods = "GET, OPTIONS"
  Access-Control-Allow-Headers = "Content-Type"
  Access-Control-Allow-Credentials = "true"
  Cross-Origin-Resource-Policy = "cross-origin"
  Cross-Origin-Embedder-Policy = "unsafe-none"
  Cross-Origin-Opener-Policy = "unsafe-none"
  Cache-Control = "public, max-age=3600"

# ✅ Apply same rules to popup page
[[headers]]
  for = "/ZIAuth.html"
  [headers.values]
  Access-Control-Allow-Origin = "*"
  Cross-Origin-Resource-Policy = "cross-origin"

# ✅ Default fallback if needed
[[redirects]]
  from = "/*"
  to = "/ZIAuth.html"
  status = 200
